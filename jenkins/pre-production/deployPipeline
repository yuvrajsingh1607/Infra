node {
   try {
   	stage('Preparation') {
   	 	git url: 'git@github.com:yuvrajsingh1607/oregon-qa-test.git',
    	    	branch: "${params.branch}"
  	 }
     stage('Deployment') {
    		sh "/var/lib/jenkins/bin/kubectl apply -f jenkins/k8s/service.yaml -n ${namespace}"
            sh "/var/lib/jenkins/bin/kubectl apply -f jenkins/k8s/deployment.yaml -n ${namespace}"
            sh "/var/lib/jenkins/bin/kubectl rollout status deploy ${deploymentName} -n ${namespace}"
    		echo "Deployment completed for  ${deploymentName}"

  	 }
	} catch(error) {
        currentBuild.result = "FAILURE"
    }
}

